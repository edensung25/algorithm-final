<!DOCTYPE html>
<html lang="en">

<head>
	<title>Find the Shortest Path for You</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Travello template project">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css">
	<link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.carousel.css">
	<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
	<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/animate.css">
	<link rel="stylesheet" type="text/css" href="styles/main_styles.css">
	<link rel="stylesheet" type="text/css" href="styles/responsive.css">
	<link rel="stylesheet" type="text/css" href="styles/jquery-ui.min.css">
</head>

<body>

	<div class="super_container">

		<!-- Header -->

		<header class="header">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="header_content d-flex flex-row align-items-center justify-content-start">
							<div class="header_content_inner d-flex flex-row align-items-end justify-content-start">
								<div class="logo"><a href="index.html">Algorithm Group</a></div>
								<nav class="main_nav">
									<ul class="d-flex flex-row align-items-start justify-content-start">
										<li class="active"><a href="index.html">Home</a></li>
										<li><a href="about.html">About us</a></li>
										<li><a href="contact.html">Contact</a></li>
									</ul>
								</nav>
								<div class="header_phone ml-auto">Call us: No Number!</div>

								<!-- Hamburger -->

								<div class="hamburger ml-auto">
									<i class="fa fa-bars" aria-hidden="true"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="header_social d-flex flex-row align-items-center justify-content-start">
				<ul class="d-flex flex-row align-items-start justify-content-start">
					<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
				</ul>
			</div>
		</header>

		<!-- Menu -->

		<div class="menu">
			<div class="menu_header d-flex flex-row align-items-center justify-content-start">
				<div class="menu_logo"><a href="index.html">Travello</a></div>
				<div class="menu_close_container ml-auto">
					<div class="menu_close">
						<div></div>
						<div></div>
					</div>
				</div>
			</div>
			<div class="menu_content">
				<ul>
					<li><a href="inex.html">Home</a></li>
					<li><a href="about.html">About us</a></li>
					<li><a href="#">Services</a></li>
					<li><a href="news.html">News</a></li>
					<li><a href="contact.html">Contact</a></li>
				</ul>
			</div>
			<div class="menu_social">
				<div class="menu_phone ml-auto">Call us: 00-56 445 678 33</div>
				<ul class="d-flex flex-row align-items-start justify-content-start">
					<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
				</ul>
			</div>
		</div>

		<!-- Home -->

		<div class="home">

			<!-- Home Slider -->
			<div class="home_slider_container">
				<div class="owl-carousel owl-theme home_slider">

					<!-- Slide -->
					<div class="owl-item">
						<div class="background_image" style="background-image:url(images/home_slider.jpg)"></div>
						<div class="home_slider_content_container">
							<div class="container">
								<div class="row">
									<div class="col">
										<div class="home_slider_content">
											<div class="home_title">
												<h2>Let's find the best path for you</h2>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Slide -->
					<div class="owl-item">
						<div class="background_image" style="background-image:url(images/home_slider.jpg)"></div>
						<div class="home_slider_content_container">
							<div class="container">
								<div class="row">
									<div class="col">
										<div class="home_slider_content">
											<div class="home_title">
												<h2>Let us take you away</h2>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Slide -->
					<div class="owl-item">
						<div class="background_image" style="background-image:url(images/home_slider.jpg)"></div>
						<div class="home_slider_content_container">
							<div class="container">
								<div class="row">
									<div class="col">
										<div class="home_slider_content">
											<div class="home_title">
												<h2>Let us take you away</h2>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Search -->

		<div class="home_search">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="home_search_container">
							<div class="home_search_title">Search for your trip</div>
							<div class="home_search_content">
								<!-- <form action="#" class="home_search_form" id="home_search_form"> -->
									<div
										class="d-flex flex-lg-row flex-column align-items-start justify-content-lg-between justify-content-start">
										<input type="text" id="DepartureId" class="search_input search_input_2" placeholder="Departure"
											name="start" required="required">
										<input type="text" id="ArrivalId" class="search_input search_input_3" placeholder="Arrival"
											name="end" required="required">
										<a href="#list"><button id="searchbtn" class="home_search_button" onClick="drawMap()">search</button></a>
									</div>
								<!-- </form> -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Intro -->
		<section id="list">
			<div class="intro">
				<div class="container">
					<div class="row">
						<div class="col">
							<div class="intro_container">
								<div class="row" style="height: 150px">
	
									<!-- Intro Item -->
									<div class="col-lg-4 intro_col">
										<div class="intro_item d-flex flex-row align-items-end justify-content-start">
											<div class="intro_icon"><img src="images/wallet.svg" alt=""></div>
											<div class="intro_content">
												<div class="intro_title">The Shortest Pathes</div>
												<div class="intro_subtitle">
													<p>Click the one you prefer.</p>
												</div>
												<input type="checkbox" id="filter" value="maloprodaja" class='chk-btn'>
												<label for='flush'>Show Airports</label>
											</div>
										</div>
									</div>
	
									<!-- Intro Item -->
									<div class="col-lg-8 intro_col" style="margin-top: -55px">
										<div class="intro_item d-flex flex-row align-items-end justify-content-start">
											<div class="intro_content">
												<div id="result-title" class="intro_title"></div>
												<div class="intro_subtitle">
													<button id="option0" class="draw_option_button text-left" onClick="selectRoute(0)"></button>
												</div>
												<div class="intro_subtitle">
													<button id="option1" class="draw_option_button text-left" onClick="selectRoute(1)"></button>
												</div>
												<div class="intro_subtitle">
													<button id="option2" class="draw_option_button text-left" onClick="selectRoute(2)"></button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		

		<section id="map">
			<div id="googleMap" style="width:100%;height:700px;"></div>
		</section>

		<script>
            var flightPath;
            var map;
			var resp;
            function initMap() {
                map = new google.maps.Map(document.getElementById('googleMap'), {
					zoom: 4.8,
					center: { lat: 37.8283, lng: -98.5795 },
				});

                var flightPathCoordinates = [];

                flightPath = new google.maps.Polyline({
                path: flightPathCoordinates,
                strokeColor: '#FF0000',
                strokeOpacity: 1.0,
                strokeWeight: 2
                });

                addLine();
            }

            function addLine() {
                flightPath.setMap(map);
            }

            function removeLine() {
                flightPath.setMap(null);
            }

			function selectRoute(idx) {
				this.removeLine();
				var flightPlanCoordinates = [];
				j = parseInt(idx);
				var title = "";
				result = resp;
				for (i = 0 ; i < result['data'][j].length; i++) {
					tmep = {lat: parseFloat(result['data'][j][i]['latitude']), lng: parseFloat(result['data'][j][i]['longitude'])};
					flightPlanCoordinates.push(tmep);
				}
				flightPath = new google.maps.Polyline({
					path: flightPlanCoordinates,
					strokeColor: '#FF0000',
					strokeOpacity: 1.0,
					strokeWeight: 2
				});
				flightPath.setMap(map);
			}

			function drawMap() {
				this.removeLine();
				var start = document.getElementById("DepartureId");
				var end = document.getElementById("ArrivalId");
				$.ajax({url: "http://127.0.0.1:5000/?start="+start.value+"&destination="+end.value, success: function(result) {
					resp = result
					$("#result-title").html("The result for you:");
					for (j = 0 ; j < result['data'].length; j++) {
						var title = "";
						for (i = 0 ; i < result['data'][j].length; i++) {
							if (title != "") {
								title = title + " -> " + result['data'][j][i]['code'];
							} else {
								title = result['data'][j][i]['code'];
							}
						}
						$("#option"+j).html((j+1)+". "+title);
					}
					selectRoute(0);
				}
				});
				document.getElementById("DepartureId").value = "";
				document.getElementById("ArrivalId").value = "";
			}
		</script>

		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCn5fh124bsTgI9vXH5YEO-BqIHr1G1EOI&callback=initMap"></script>

		<!-- Footer -->

		<footer class="footer">
			<div class="parallax_background parallax-window" data-parallax="scroll" data-image-src="images/footer_1.jpg"
				data-speed="0.8"></div>
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="newsletter">
							<div class="newsletter_title_container text-center">
								<div class="newsletter_title">Subscribe to our newsletter to get the latest trends &
									news</div>
								<div class="newsletter_subtitle">Join our database NOW!</div>
							</div>
							<div class="newsletter_form_container">
								<form action="#"
									class="newsletter_form d-flex flex-md-row flex-column align-items-start justify-content-between"
									id="newsletter_form">
									<div class="d-flex flex-md-row flex-column align-items-start justify-content-between">
										<div><input type="text" class="newsletter_input newsletter_input_name" id="newsletter_input_name"
												placeholder="Name" required="required">
											<div class="input_border"></div>
										</div>
										<div><input type="email" class="newsletter_input newsletter_input_email" id="newsletter_input_email"
												placeholder="Your e-mail" required="required">
											<div class="input_border"></div>
										</div>
									</div>
									<div><button class="newsletter_button">subscribe</button></div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="row footer_contact_row">
					<div class="col-xl-10 offset-xl-1">
						<div class="row">

							<!-- Footer Contact Item -->
							<div class="col-xl-4 footer_contact_col">
								<div
									class="footer_contact_item d-flex flex-column align-items-center justify-content-start text-center">
									<div class="footer_contact_icon"><img src="images/sign.svg" alt=""></div>
									<div class="footer_contact_title">give us a call</div>
									<div class="footer_contact_list">
										<ul>
											<li>Office Landline: +44 5567 32 664 567</li>
											<li>Mobile: +44 5567 89 3322 332</li>
										</ul>
									</div>
								</div>
							</div>

							<!-- Footer Contact Item -->
							<div class="col-xl-4 footer_contact_col">
								<div
									class="footer_contact_item d-flex flex-column align-items-center justify-content-start text-center">
									<div class="footer_contact_icon"><img src="images/trekking.svg" alt=""></div>
									<div class="footer_contact_title">come & drop by</div>
									<div class="footer_contact_list">
										<ul style="max-width:190px">
											<li>4124 Barnes Street, Sanford, FL 32771</li>
										</ul>
									</div>
								</div>
							</div>

							<!-- Footer Contact Item -->
							<div class="col-xl-4 footer_contact_col">
								<div
									class="footer_contact_item d-flex flex-column align-items-center justify-content-start text-center">
									<div class="footer_contact_icon"><img src="images/around.svg" alt=""></div>
									<div class="footer_contact_title">send us a message</div>
									<div class="footer_contact_list">
										<ul>
											<li>youremail@gmail.com</li>
											<li>Office@yourbusinessname.com</li>
										</ul>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<div class="col text-center">
				<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
				Copyright &copy;
				<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made
				with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com"
					target="_blank">Colorlib</a>
				<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
			</div>
		</footer>
	</div>

	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="styles/bootstrap4/popper.js"></script>
	<script src="styles/bootstrap4/bootstrap.min.js"></script>
	<script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
	<script src="plugins/Isotope/isotope.pkgd.min.js"></script>
	<script src="plugins/scrollTo/jquery.scrollTo.min.js"></script>
	<script src="plugins/easing/easing.js"></script>
	<script src="plugins/parallax-js-master/parallax.min.js"></script>
	<script src="js/custom.js"></script>
	<script src="js/AutocompleteFiels.js"></script>
	<script src="js/airports.js"></script>
	<script>
		var markers = [];
		$(function () {

			$("#ArrivalId").autocomplete({
				source: Arrivals
			});

			$("#DepartureId").autocomplete({
				source: Departures
			});
			$.ui.autocomplete.filter = function (array, term) {
				var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(term), "i");
				return $.grep(array, function (value) {
					return matcher.test(value.label || value.value || value);
				});
			};

			$("#searchbtn").click(function () {
				// alert("shromed");

				var depart = $("#DepartureId").val();
				var Arriv = $("#ArrivalId").val();
				// ShortestPath(depart,Arriv);
				// airportOnMap();
			});

			$('#filter').change(function () {
				if (this.checked) {
					airportOnMap(true);
				}
				else
					airportOnMap(false);
			});

		});
		function ShortestPath(Departure, Arrival) {
			alert(Departure);
			alert(Arrival);
		}

		function airportOnMap(show) {
			// alert(show);
			if (show) {
				for (let index = 0; index < airports.length; index++) {
					const element = airports[index];

					var position = new google.maps.LatLng(element.lat, element.lon)
					var marker = new google.maps.Marker({
						position: position,
						label: element.iata
					});
					marker.setMap(map);
					markers.push(marker);
				}
			}
			else {
				for (var i = 0; i < markers.length; i++) {
					markers[i].setMap(null);
				}
				markers = [];
			}
		}
	</script>
</body>

</html>